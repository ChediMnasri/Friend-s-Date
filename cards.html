<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Experience Begins</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
    <style>
        /* Configure Tailwind to use Inter font and apply custom colors */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        
        :root {
            --card-width: 20rem;
            --card-height: 28rem;
        }

        /* Custom Styles for the 3D Flip Effect and Floating Animation */
        .card-scene {
            perspective: 1000px; /* Required for 3D effect */
        }

        .card-inner {
            width: 100%;
            height: 100%;
            transition: transform 0.8s cubic-bezier(0.4, 0.0, 0.2, 1); /* Smooth flip animation */
            transform-style: preserve-3d; /* Keep children in 3D space */
            cursor: pointer;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.6); /* Deep shadow for floating effect */
            border-radius: 1rem;
        }

        .flipped {
            transform: rotateY(180deg) !important;
            pointer-events: none; /* Disable clicking once flipped */
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden; /* Hide the back side during rotation */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
            border-radius: 1rem;
        }

        .card-back {
            transform: rotateY(180deg); /* Start rotated 180deg */
        }

        /* Floating/Rotation Animation */
        @keyframes floatRotate {
            0% { transform: translateY(0) rotate(1deg); }
            50% { transform: translateY(-10px) rotate(-1deg); }
            100% { transform: translateY(0) rotate(1deg); }
        }

        .card-animation {
            animation: floatRotate 8s ease-in-out infinite;
        }

        /* Specific animation delays for a scattered look */
        #card-1 { animation-delay: 0s; }
        #card-2 { animation-delay: 2s; }
        #card-3 { animation-delay: 4s; }
        #card-4 { animation-delay: 6s; }
    </style>
    <script>
        // --- Global State and Constants ---
        const CARD_COUNT = 4;
        let openedCardCount = 0;
        let cardsState = {};

        // --- Tone.js Sound Setup ---
        // A simple, fast-envelope sine wave to create a soft, quick 'whoosh' or 'chime' sound.
        const synth = new Tone.Synth({
            oscillator: { type: "sine" },
            envelope: {
                attack: 0.005,
                decay: 0.1,
                sustain: 0,
                release: 0.1
            }
        }).toDestination();

        /**
         * Plays a soft 'whoosh' sound effect.
         */
        const playWhoosh = async () => {
            await Tone.start();
            // Play a high note softly for a magical, gentle transition sound
            synth.triggerAttackRelease("C6", "16n", Tone.now(), 0.5);
        };

        /**
         * Flips the clicked card and checks if the 'Continue' button should appear.
         * @param {string} cardId The ID of the card to flip (e.g., 'card-1')
         */
        const flipCard = (cardId) => {
            const cardInner = document.querySelector(`#${cardId} .card-inner`);

            // Prevent flipping if already flipped
            if (cardInner.classList.contains('flipped')) {
                return;
            }

            // 1. Play Sound
            playWhoosh();

            // 2. Perform Flip Animation
            cardInner.classList.add('flipped');

            // 3. Update State
            if (!cardsState[cardId]) {
                cardsState[cardId] = true;
                openedCardCount++;
            }

            // 4. Check for Completion and Enable Button
            if (openedCardCount === CARD_COUNT) {
                setTimeout(() => {
                    const continueButton = document.getElementById('continue-button');
                    continueButton.classList.remove('opacity-0', 'scale-90');
                    continueButton.classList.add('opacity-100', 'scale-100');
                    continueButton.removeAttribute('disabled'); // Enable navigation
                }, 1000); // Wait for the last flip to complete before showing the button
            }
        };

        // Initialize state and listeners on load
        window.onload = () => {
            for (let i = 1; i <= CARD_COUNT; i++) {
                cardsState[`card-${i}`] = false;
            }
            // Add event listeners for flipping cards
            document.getElementById('card-1').addEventListener('click', () => flipCard('card-1'));
            document.getElementById('card-2').addEventListener('click', () => flipCard('card-2'));
            document.getElementById('card-3').addEventListener('click', () => flipCard('card-3'));
            document.getElementById('card-4').addEventListener('click', () => flipCard('card-4'));

            // Add navigation listener to the continue button
            const continueButton = document.getElementById('continue-button');
            continueButton.addEventListener('click', () => {
                // Only navigate if all cards are open
                if (openedCardCount === CARD_COUNT) {
                    window.location.href = 'dreamroom.html';
                }
            });
        };

    </script>
</head>
<body class="bg-gray-900 min-h-screen flex flex-col items-center justify-center p-6 font-['Inter'] text-white">

    <header class="text-center mb-12">
        <h1 class="text-5xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-500">
            The Experience Begins
        </h1>
        <p class="mt-2 text-xl text-gray-300">
            Click on each floating card to reveal its message.
        </p>
    </header>

    <main class="w-full max-w-7xl">
        <div class="flex flex-wrap justify-center gap-12 lg:gap-20">

            <div id="card-1" class="card-scene w-72 h-96 lg:w-80 lg:h-[30rem] card-animation">
                <div class="card-inner">
                    <div class="card-face bg-purple-800/80 border-4 border-purple-500/70 shadow-xl flex flex-col justify-center items-center">
                        <svg class="w-20 h-20 text-yellow-300 mb-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13.5 3L6 15H10.5L9 21L16.5 9H12L13.5 3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <p class="text-xl font-bold tracking-widest uppercase">The Moment</p>
                    </div>
                    <div class="card-face card-back bg-gradient-to-br from-gray-700 to-gray-800 border-4 border-yellow-500 text-center text-lg text-gray-200">
                        <div class="space-y-4">
                            <h2 class="text-2xl font-bold text-yellow-400 mb-3">The Moment</h2>
                            <p>I made a stupid move.</p>
                            <p>And instead of creating comfort, I added pressure to a moment that was yours.</p>
                            <p class="mt-4 text-xl font-semibold italic text-purple-300">This is me choosing grace instead of ego.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="card-2" class="card-scene w-72 h-96 lg:w-80 lg:h-[30rem] card-animation">
                <div class="card-inner">
                    <div class="card-face bg-purple-800/80 border-4 border-purple-500/70 shadow-xl flex flex-col justify-center items-center">
                        <svg class="w-20 h-20 text-blue-300 mb-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.477 2 2 6.477 2 12C2 17.523 6.477 22 12 22C17.523 22 22 17.523 22 12C22 6.477 17.523 2 12 2ZM12 18C8.686 18 6 15.314 6 12C6 8.686 8.686 6 12 6C15.314 6 18 8.686 18 12C18 15.314 15.314 18 12 18Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <p class="text-xl font-bold tracking-widest uppercase">The Understanding</p>
                    </div>
                    <div class="card-face card-back bg-gradient-to-br from-gray-700 to-gray-800 border-4 border-blue-500 text-center text-lg text-gray-200">
                        <div class="space-y-4">
                            <h2 class="text-2xl font-bold text-blue-400 mb-3">The Understanding</h2>
                            <p>Of your escape into your inner world to feel safe.</p>
                            <p>My mistake pushed you out of that peace.</p>
                            <p class="mt-4 text-xl font-semibold italic text-purple-300">This little universe is me giving it back to you.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="card-3" class="card-scene w-72 h-96 lg:w-80 lg:h-[30rem] card-animation">
                <div class="card-inner">
                    <div class="card-face bg-purple-800/80 border-4 border-purple-500/70 shadow-xl flex flex-col justify-center items-center">
                        <svg class="w-20 h-20 text-red-300 mb-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.477 2 2 6.477 2 12C2 17.523 6.477 22 12 22C17.523 22 22 17.523 22 12C22 6.477 17.523 2 12 2ZM8 10C8 9.44772 8.44772 9 9 9C9.55228 9 10 9.44772 10 10C10 10.5523 9.55228 11 9 11C8.44772 11 8 10.5523 8 10ZM15 11C15.5523 11 16 10.5523 16 10C16 9.44772 15.5523 9 15 9C14.4477 9 14 9.44772 14 10C14 10.5523 14.4477 11 15 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M8 15C9.5 16.5 14.5 16.5 16 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <p class="text-xl font-bold tracking-widest uppercase">The Humor Fix</p>
                    </div>
                    <div class="card-face card-back bg-gradient-to-br from-gray-700 to-gray-800 border-4 border-red-500 text-center text-lg text-gray-200">
                        <div class="space-y-4 pt-4">
                            <p class="text-2xl font-bold text-red-400 mb-4">My HUMOR fix is that</p>
                            
                            <p class="text-lg italic text-pink-300/90 border-t border-b border-pink-400/50 py-2">
                                I promise that I will be from now on:
                            </p>
                            
                            <ul class="list-none text-left w-full max-w-xs mx-auto space-y-2 font-mono text-xl">
                                <li class="text-green-300">50% philosopher</li>
                                <li class="text-red-300">30% chaotic gremlin</li>
                                <li class="text-purple-300">20% jealous cat</li>
                            </ul>
                            <p class="mt-4 text-xl font-semibold italic text-purple-300">at the WRONG moments.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="card-4" class="card-scene w-72 h-96 lg:w-80 lg:h-[30rem] card-animation">
                <div class="card-inner">
                    <div class="card-face bg-purple-800/80 border-4 border-purple-500/70 shadow-xl flex flex-col justify-center items-center">
                        <svg class="w-20 h-20 text-green-300 mb-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2C6.477 2 2 6.477 2 12C2 17.523 6.477 22 12 22C17.523 22 22 17.523 22 12C22 6.477 17.523 2 12 2ZM17.657 16.343L12 10.686L6.343 16.343" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M12 7V13H18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <p class="text-xl font-bold tracking-widest uppercase">The Reset</p>
                    </div>
                    <div class="card-face card-back bg-gradient-to-br from-gray-700 to-gray-800 border-4 border-green-500 text-center text-lg text-gray-200">
                        <div class="space-y-4">
                            <h2 class="text-2xl font-bold text-green-400 mb-3">The Reset</h2>
                            <p>This is our reset button.</p>
                            <p class="mt-4 text-xl font-semibold italic text-purple-300">New energy. New moment.</p>
                            <p class="mt-4 text-xl font-semibold italic text-purple-300">New us — as friends tonight.</p>
                            <p class="mt-4 text-2xl font-extrabold text-yellow-300">No pressure. Only presence.</p>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <div class="mt-16">
        <button id="continue-button" class="
            px-8 py-4 text-2xl font-bold rounded-full 
            transition-all duration-700 transform 
            opacity-0 scale-90 
            bg-gradient-to-r from-yellow-400 to-yellow-600 
            text-gray-900 shadow-2xl shadow-yellow-500/50 
            hover:shadow-yellow-400/80 hover:scale-105"
            disabled
        >
            <span class="inline-block animate-pulse">✨ Continue ✨</span>
        </button>
    </div>

</body>
</html>